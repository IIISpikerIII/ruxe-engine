<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//RU">
<html>
	<head>
		<title>Как создать дополнение для Ruxe Engine</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta name="generator" content="Extra Hide Studio 2010 (www.ruxesoft.net)">
		<link rel="stylesheet" type="text/css" href="../style.css">
	</head>
<body>
<center>
	<table border=0 cellpadding=0 cellspacing=0>
		<tr><td>
			<img src="../../rpanel/theme/images/rpanel.jpg" border=0><br>
			<div style="margin:-26px 10px 0px 0px; text-align:right;"><a href="http://engine.ruxesoft.net">engine.ruxesoft.net</a></div>
		</td></tr>
        </table><br><br>
        <div style="width:830px; text-align:left;">
        	<h2>Как создать дополнение для Ruxe Engine</h2>
		<!-- -->
		<p class="ro">При создании дополнения полезным будет использовать <a href="api.html" target="_blank">Ruxe Engine API</a>.</p>
              				<p class="ro"><b>1. Файловая структура дополнения.</b></p>
              				<p class="ro">Все дополнения располагаются в каталоге <b>/includes/plugins/</b>. Они могут использовать папку <b>/conf/</b> для хранения своих настроек. Изменять системные файлы запрещается.</p>
              				<ul>
              					<li>/includes/
              							<ul>
              								<li>plugins/
              									<ul>
              										<li>название_дополнения/
              											<ul>
              												<li>admin.php</li>
              												<li>functions.php</li>
              												<li>info.dat</li>
              											</ul>
              										</li>
              									</ul>
              								</li>
              							</ul>
              					</li>
              				</ul>
              				<p class="ro">В дополнении должны быть как минимум эти три вышеуказанных файла. Можно также размещать и другие, необходимые для правильного функционирования или оформления выводимого результата. Рассмотрим каждый элемент по отдельности.</p>
              				<center><table class="optionstable" cellpadding=1 cellspacing=0 width="70%">
              					<tr class="titletable"><td>Элемент</td><td>Описание</td></tr>
              					<tr><td align="center"><b>название_дополнения</b></td><td>Имя папки дополнения. Настоятельно рекомендуется использовать только английские буквы и/или цифры. Каждая новая папка - новое дополнение.</td></tr>
              					<tr><td align="center"><b>admin.php</b></td><td>В данном файле находится код, который автоматически подключается (через include) в Админ-центре, в разделе "Дополнения".<br><b>Примечание:</b>страница дополнения не будет отображаться до тех пор, пока дополнение не будет включено (Админ-центр =&gt; Другие модули =&gt; Дополнения =&gt; Настроить =&gt; название_дополнения =&gt; Включить).</td></tr>
              					<tr><td align="center"><b>functions.php</b></td><td>Этот файл подключается (через include) после обработки системного файла functions.command.php. В нём находятся команды дополнения.</td></tr>
              					<tr><td align="center"><b>info.dat</b></td><td>В этом файле находится справочная информация о дополнении (название, версия, описание, автор, адрес сайта дополнения, параметр использования промежуточных страниц).</td></tr>
              				</table></center><br>
              				<p class="ro"><b>2. Пример содержимого файла admin.php.</b></p>
              				<p class="ro"><br>
              					&lt;?<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;<font color="green">/*</font><br>
              					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="green">То, что пользователь может увидеть на странице дополнения, должно быть в переменной $print. Не следует допускать прямой вывод на страницу. </font><br>
              					&nbsp;&nbsp;&nbsp;&nbsp;<font color="green">*/</font><br>
              					&nbsp;&nbsp;&nbsp;&nbsp;$print = "Тут могли бы быть настройки дополнения";<br>
              					?&gt;
              				</p>
              				<br>
              				<p class="ro"><b>3. Пример содержимого файла functions.php.</b></p>
              				<p class="ro"><br>
              					&lt;?<br>
              					<font color="green">
              						&nbsp;&nbsp;&nbsp;&nbsp;/*<br>
              						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Если существует $_GET['action'] при запросе страницы, то система сравнивает с своей базой действий значение $_GET['action'] и, если не находит соответствие, выдаёт ошибку ("Действие не найдено").<br>
              						Вы можете добавить своё действие. Для этого в info.dat переменная $addaction должна равняться единице ($addaction = 1;). Вашим действием станет имя каталога дополнения (в данном случае example). В действии обязательно должны использоваться переменные $openpage и $pagetitle. $openpage = текст страницы, а $pagetitle - заголовок.<br>
              						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Пример:<br>
              						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function here_example()<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo '&lt;a href="?action=example"&gt;Проверка&lt;/a&gt;';<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<bR>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (isset($_GET['action']))<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($_GET['action']=="example")<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$openpage   = "Проверка пройдена!";<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pagetitle  = "Сообщение";<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;В действии можно включить автоматическую переадресацию. Но в этом случае страница действия не будет отображена, если отключена опция показа промежуточных страниц в админ-центре, а будет сразу переадресация на указанный адрес. Для включения автоматической переадресации необходимо заполнить переменную $pageredirect.<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Пример:<br><br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function here_example()<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo '&lt;a href="?action=example"&gt;Проверка&lt;/a&gt;';<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (isset($_GET['action']))<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($_GET['action']=="example")<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$openpage     = "Проверка пройдена!";<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pagetitle    = "Сообщение";<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pageredirect = "http://mysite.domain";<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}; <br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
							&nbsp;&nbsp;&nbsp;&nbsp;*/ <br>
              					</font>
              					&nbsp;&nbsp;&nbsp;&nbsp;function here_example()<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;{<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo "Hello World!";<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;};<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;if (isset($_GET['action']))<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;{<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($_GET['action']=="example")<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$openpage = "привет";<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pagetitle = "Тест";<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pageredirect = "http://engine.ruxesoft.net";<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};
              					<br>
              					&nbsp;&nbsp;&nbsp;&nbsp;};<br>
              					?&gt;
              				</p>
              				<br>
              				<p class="ro"><b>Пример содержимого файла info.dat.</b></p>
              				<p class="ro"><br>
             				&lt;?<br>
					<font color="green">
						&nbsp;&nbsp;&nbsp;&nbsp;/*<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Справочная информация о дополнении<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name - имя Вашего дополнения<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$version - версия<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$description - описание<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$author - имя автора<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$site - адрес сайта дополнения<br>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$addaction - доступные значения 1 и 0. Включает и отключает соответственно использование промежуточных страниц для дополнения.<br>
						&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
					</font>
					$name          = "Тестовый модуль";<br>
					$version       = "1.0";<br>
					$description   = "Пример дополнения";<br>
					$author        = "Ruxe Engine";<br>
					$site          = "http://engine.ruxesoft.net/";<br>
					$addaction     = 1;<br>
					?&gt;
		<!-- -->
        </div>
        <div style="height:200px;">&nbsp;</div>
</center>
</body>
</html>